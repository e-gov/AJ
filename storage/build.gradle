version '1.0.3'

apply plugin: 'java'
apply plugin: 'checkstyle'
apply plugin: 'war'
apply plugin: 'eclipse-wtp'

checkstyle {
	configFile = rootProject.file('config/checkstyle/checkstyle.xml')
    sourceSets = [project.sourceSets.main]
    ignoreFailures = true
}

dependencies {
    implementation 'javax.servlet:javax.servlet-api:3.0.1'

    implementation 'org.slf4j:slf4j-api:1.7.18'
    implementation 'org.apache.logging.log4j:log4j-slf4j-impl:2.17.1'
    implementation 'org.apache.logging.log4j:log4j-core:2.17.1'
	implementation 'org.json:json:20160212'
	implementation 'org.postgresql:postgresql:9.4.1208.jre6'

    implementation project(':dumonitor-common')

	testImplementation 'junit:junit:4.12'
	testImplementation 'org.mockito:mockito-all:1.10.18'
	
	 implementation project(':dumonitor-common')
}

license {
	header project.file('LICENSE.txt')
	include '**/*.java'
   	mapping 'java', 'SLASHSTAR_STYLE'
}

task createBaseNameWar(type:Copy, dependsOn: 'war') {
        from(war.destinationDir)
        into(war.destinationDir)
	include(war.archiveName)
        rename(war.archiveName, project.name + '.war')
}

task buildDeb (type: Exec, dependsOn: 'createBaseNameWar') {
        description 'Build deb packages'
        commandLine './buildDeb.sh', project.name, project.version
}

task buildZip (type: Exec, dependsOn: 'createBaseNameWar') {
        description 'Build zip packages'
        commandLine './buildZip.sh', project.name, project.version
}
